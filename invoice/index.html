<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>dubbing invoice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="https://developer.apple.com/fonts/sf-pro.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="../favicon.png">

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro', 'Inter', sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
        }

        h1 {
            font-family: 'SF Pro', 'Inter', sans-serif;
            text-align: center;
            color: #ffffff;
        }

        .form-section {
            background: #2a2a2a;
            padding: 30px;
            margin: auto;
            max-width: 900px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        label {
            font-family: 'SF Pro', 'Inter', sans-serif;
            font-weight: 600;
            display: block;
            margin-top: 15px;
            color: #d0d0d0;
            font-size: 14px;
            letter-spacing: 0.2px;
        }

        input,
        select,
        textarea {
            font-family: 'SF Pro', 'Inter', sans-serif;
            width: 100%;
            padding: 12px;
            margin-top: 6px;
            border: 1px solid #4a4a4a;
            border-radius: 8px;
            font-size: 16px;
            background: #333333;
            color: #e0e0e0;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #5c6bc0;
            box-shadow: 0 0 0 3px rgba(92, 107, 192, 0.3);
        }

        button {
            font-family: 'SF Pro', 'Inter', sans-serif;
            background: rgb(64, 63, 63);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.8px;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            touch-action: manipulation;
        }

        button:hover {
            background: gray;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .dubbing-row {
            border: 1px solid #4a4a4a;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            background: #333333;
            transition: background 0.2s ease;
        }

        .dubbing-row:hover {
            background: #333333;
        }

        .dubbing-row:nth-child(even) {
            background: #333333;
        }

        .dubbing-row:nth-child(even):hover {
            background: #333333;
        }

        .deleteBtn {
            font-family: 'SF Pro', 'Inter', sans-serif;
            background: rgb(108, 6, 6);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            max-width: 140px;
            margin: 15px auto 0;
            text-align: center;
        }

        .deleteBtn:hover {
            background: rgb(143, 23, 2);
            transform: translateY(-1px);
        }

        .deleteBtn:active {
            transform: translateY(0);
        }

        .client-details {
            border: 1px solid #4a4a4a;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            background: #333333;
            transition: background 0.2s ease;
        }

        .client-details:hover {
            background: #333333;
        }

        .client-details:nth-child(even) {
            background: #333333;
        }

        .client-details:nth-child(even):hover {
            background: #333333;
        }

        #invoice {
            display: none;
            background: #fff;
            width: 100%;
            max-width: 760px;
            padding: 40px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            font-family: 'SF Pro', 'Inter', sans-serif;
        }

        #invoice {
            background: #ffffff !important;
            color: #1a252f !important;
        }

        #invoice header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1a252f;
            padding-bottom: 12px;
            margin-bottom: 25px;
        }

        #invoice header h2 {
            margin: 0;
            font-size: 28px;
            color: #1a252f;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        #invoice header .date {
            font-size: 13px;
            color: #1a252f;
            font-weight: 500;
        }

        .section {
            margin-top: 20px;
        }

        .section h3 {
            margin-bottom: 10px;
            font-size: 16px;
            color: #1a252f;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 6px;
            font-weight: 600;
        }

        .section p {
            margin: 6px 0;
            font-size: 13px;
            white-space: pre-line;
            color: #2d3748;
        }

        .gst-label {
            font-weight: 600;
            display: inline;
            margin-right: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }

        th,
        td {
            border: 1px solid #e5e7eb;
            padding: 10px;
            text-align: left;
            font-size: 13px;
        }

        th {
            background: #1a252f;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        td {
            background: #f9fafb;
        }

        .total {
            text-align: right;
            font-weight: 700;
            padding: 12px 0 0;
            font-size: 15px;
            border-top: 2px solid #1a252f;
            color: #1a252f;
        }

        .bank,
        .signature {
            margin-top: 35px;
            font-size: 13px;
            color: #2d3748;
        }

        .bank p {
            margin: 6px 0;
        }

        .signature {
            text-align: right;
            font-weight: 700;
            margin-top: 70px;
            font-size: 15px;
            color: #1a252f;
        }

        .bank,
        .signature,
        .section,
        tr {
            page-break-inside: avoid;
        }

        @media (max-width: 600px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .form-section {
                padding: 20px;
            }

            input,
            select,
            textarea {
                font-size: 14px;
                padding: 10px;
            }

            button {
                font-size: 14px;
                padding: 12px;
            }

            .dubbing-row {
                padding: 15px;
            }

            .deleteBtn {
                font-size: 12px;
                padding: 8px;
                max-width: 120px;
            }

            #invoice {
                padding: 20px;
            }

            #invoice header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>

<body>

    <h1>dubbing invoice</h1>
    <div class="form-section">
        <h3>client details</h3>
        <div class="client-details">
            <label>choose client (optional)</label>
            <select id="clientSelect" onchange="fillClientData()">
                <option value="new">new client</option>
                <option value="subhash">Subhash Studios Private Limited</option>
            </select>

            <label>name</label>
            <input id="clientName">
            <label>contact number</label>
            <input type="number" id="clientContact">
            <label>address</label>
            <textarea id="clientAddress"></textarea>
            <label>GSTIN</label>
            <input id="clientGST">
        </div>

        <h3>project details</h3>
        <div id="dubbingRows"></div>
        <button type="button" onclick="addRow()">add dub</button>

        <button type="button" onclick="generateInvoice()">generate invoice</button>
    </div>

    <div id="invoice">
        <header>
            <h2>Invoice</h2>
            <div class="date">Date: <span id="invoiceDate"></span></div>
        </header>

        <div class="section">
            <h3>From</h3>
            <p><strong>Jullie Devaani</strong></p>
            <p>7506242650</p>
            <p>B-70, Vardhman Nagar<br>Nursing Lane, Malad West<br>Mumbai-64</p>
            <p>jullie.devaani@gmail.com</p>
        </div>

        <div class="section">
            <h3>Bill To</h3>
            <p><strong id="outClientName"></strong></p>
            <p id="outClientContact"></p>
            <p id="outClientAddress"></p>
            <p><span class="gst-label">GSTIN:</span> <span id="outClientGST"></span></p>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Series/Movie</th>
                    <th>Character(s)</th>
                    <th>Director</th>
                    <th>Episode(s)</th>
                    <th>Amount (₹)</th>
                </tr>
            </thead>
            <tbody id="invoiceTable"></tbody>
        </table>

        <div class="total">Total: ₹<span id="outTotal"></span></div>

        <div class="bank">
            <strong>Bank Details:</strong>
            <p>Bank of Baroda</p>
            <p><b>A/C No:</b> 99730100000419</p>
            <p><b>IFSC:</b> BARB0DBMONT (fifth character is zero)</p>
            <p><b>Branch:</b> Mount Poinsur</p>
            <p><b>UPI No:</b> 7506242650</p>
        </div>

        <div class="signature">Jullie Devaani</div>
    </div>

    <script>
        const clientData = {
            subhash: {
                name: "Subhash Studios Private Limited",
                address: "201, Nimbus Centre, Plot Number 69\nOberoi Complex, Near Laxmi Industrial Estate\nAndheri West, Mumbai-53",
                contact: "9930405505",
                gst: "27AABCS1126R1Z3"
            }
        };

        function getValueOrDash(el) {
            return el.value.trim() || "-";
        }

        function fillClientData() {
            const sel = document.getElementById("clientSelect").value;
            if (sel === "subhash") {
                document.getElementById("clientName").value = clientData.subhash.name;
                document.getElementById("clientContact").value = clientData.subhash.contact;
                document.getElementById("clientAddress").value = clientData.subhash.address;
                document.getElementById("clientGST").value = clientData.subhash.gst;
            } else {
                document.getElementById("clientName").value = "";
                document.getElementById("clientContact").value = "";
                document.getElementById("clientAddress").value = "";
                document.getElementById("clientGST").value = "";
            }
        }

        function createRow(isFirst = false) {
            const row = document.createElement("div");
            row.classList.add("dubbing-row");
            row.innerHTML = `
                <label>date <span style="color:red">*</span></label>
                <input type="date" class="dubDate" required>
                <label>series/movie’s name</label>
                <input class="seriesName">
                <label>character(s) voiced</label>
                <input class="characters">
                <label>director</label>
                <input class="director">
                <label>episode(s)</label>
                <input class="episodes">
                <label>amount (₹)</label>
                <input type="number" class="amount">
            `;
            if (!isFirst) {
                const btn = document.createElement("button");
                btn.textContent = "delete";
                btn.className = "deleteBtn";
                btn.onclick = () => row.remove();
                row.appendChild(btn);
            }
            return row;
        }

        function addRow() {
            document.getElementById("dubbingRows").appendChild(createRow());
        }

        function fillInvoiceTable() {
            const table = document.getElementById("invoiceTable");
            table.innerHTML = "";
            let total = 0;
            const rows = document.querySelectorAll("#dubbingRows .dubbing-row");
            for (let r of rows) {
                const dateEl = r.querySelector(".dubDate");
                if (!dateEl.value.trim()) {
                    alert("All projects must have a date filled in.");
                    return false;
                }
                const date = new Date(dateEl.value).toLocaleDateString("en-GB", {
                    day: "2-digit",
                    month: "2-digit",
                    year: "numeric"
                }).split("/").join("-");
                const series = getValueOrDash(r.querySelector(".seriesName"));
                const chars = getValueOrDash(r.querySelector(".characters"));
                const dir = getValueOrDash(r.querySelector(".director"));
                const eps = getValueOrDash(r.querySelector(".episodes"));
                const amt = r.querySelector(".amount").value.trim() || "-";
                if (amt !== "-") total += parseFloat(amt);

                const tr = document.createElement("tr");
                tr.innerHTML = `<td>${date}</td><td>${series}</td><td>${chars}</td><td>${dir}</td><td>${eps}</td><td>${amt}</td>`;
                table.appendChild(tr);
            }
            document.getElementById("outTotal").textContent = total.toFixed(2);
            return true;
        }

        async function generateInvoice() {
            if (!fillInvoiceTable()) return;

            document.getElementById("invoiceDate").textContent =
                new Date().toLocaleDateString("en-GB", {
                    day: "2-digit",
                    month: "2-digit",
                    year: "numeric"
                }).split("/").join("-");
            document.getElementById("outClientName").textContent =
                getValueOrDash(document.getElementById("clientName"));
            document.getElementById("outClientContact").textContent =
                getValueOrDash(document.getElementById("clientContact"));
            document.getElementById("outClientAddress").textContent =
                getValueOrDash(document.getElementById("clientAddress"));
            document.getElementById("outClientGST").textContent =
                getValueOrDash(document.getElementById("clientGST"));

            const el = document.getElementById("invoice");
            el.style.display = "block";
            await new Promise(r => requestAnimationFrame(r));

            const opt = {
                filename: "Jullie_Devaani_Invoice.pdf",
                margin: [10, 10, 10, 10],
                image: { type: "jpeg", quality: 1 },
                html2canvas: { scale: 2, useCORS: true, scrollX: 0, scrollY: 0 },
                jsPDF: { unit: "pt", format: "a4", orientation: "portrait" },
                pagebreak: { mode: ["css", "legacy"] }
            };

            await html2pdf().set(opt).from(el).save();
            el.style.display = "none";
        }

        window.onload = () => {
            document.getElementById("dubbingRows").appendChild(createRow(true));
        };
    </script>

</body>

</html>